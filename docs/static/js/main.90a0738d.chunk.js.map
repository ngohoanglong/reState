{"version":3,"sources":["modules/navigation/location.js","modules/navigation/useLocation.Subscriber.js","views/Github/Github.lazy.js","views/Covid/Covid.lazy.js","views/Home/Home.lazy.js","views/Portfolio/Portfolio.lazy.js","views/PeriodicTable/PeriodicTable.lazy.js","App.js","index.js","modules/cache/useCache.js","modules/navigation/namespace.js","modules/navigation/useLocation.js","modules/namespace/NamespaceContext.js","modules/namespace/useNamespace.js"],"names":["window","useLocationSubscriber","useCache","namespace","location","applocation","pathname","localtion","setLocation","useEffect","handleUpdateLocation","addEventListener","removeEventListener","LocationSubscriber","LazyGithub","lazy","Github","props","fallback","LazyCovid","Covid","LazyHome","Home","LazyPortfolio","Portfolio","LazyPeriodicTable","PeriodicTable","Switch","children","useLocation","element","find","child","includes","path","console","log","app","App","rootElement","document","getElementById","ReactDOM","render","StrictMode","CacheContext","React","createContext","ListennerContext","UpdateCachesContext","error","CacheProvider","initialVale","uIdRef","useRef","listennersRef","cachesRef","useState","update","setUpdate","handleListenner","useCallback","cb","current","handleUpdate","key","value","Date","now","Object","values","map","caches","Provider","useCacheSet","Consumer","useContext","initialValue","setValue","listenner","updateCaches","unLisenner","root","NamespaceContext","NamespaceProvider","useNamespace"],"mappings":"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","file":"static/js/main.90a0738d.chunk.js","sourcesContent":["export default window.location","import React, { useEffect } from \"react\";\r\nimport useCache from \"../cache/useCache\";\r\nimport namespace from \"./namespace\";\r\nimport applocation from \"./location\";\r\n\r\nconst useLocationSubscriber = () => {\r\n  const [localtion, setLocation] = useCache(namespace.location,applocation.pathname);\r\n\r\n  useEffect(() => {\r\n    function handleUpdateLocation   (){\r\n        const {\r\n            pathname\r\n          } = applocation;\r\n          setLocation(pathname); \r\n    }\r\n    handleUpdateLocation()\r\n    window.addEventListener(\"popstate\", handleUpdateLocation, false);\r\n    return ()=>{\r\n        window.removeEventListener(\"popstate\", handleUpdateLocation, false);\r\n    }\r\n  }, []);\r\n  return localtion;\r\n};\r\nexport const LocationSubscriber = () => {\r\n  useLocationSubscriber();\r\n  return null;\r\n};\r\nexport default useLocationSubscriber;\r\n","import React, { lazy, Suspense } from 'react';\r\n\r\nconst LazyGithub = lazy(() => import('./Github'));\r\n\r\nconst Github = props => (\r\n  <Suspense fallback={null}>\r\n    <LazyGithub {...props} />\r\n  </Suspense>\r\n);\r\n\r\nexport default Github;\r\n","import React, { lazy, Suspense } from 'react';\r\n\r\nconst LazyCovid = lazy(() => import('./Covid'));\r\n\r\nconst Covid = props => (\r\n  <Suspense fallback={null}>\r\n    <LazyCovid {...props} />\r\n  </Suspense>\r\n);\r\n\r\nexport default Covid;\r\n","import React, { lazy, Suspense } from 'react';\n\nconst LazyHome = lazy(() => import('./Home'));\n\nconst Home = props => (\n  <Suspense fallback={null}>\n    <LazyHome {...props} />\n  </Suspense>\n);\n\nexport default Home;\n","import React, { lazy, Suspense } from \"react\";\n\nconst LazyPortfolio = lazy(() => import(\"./Portfolio\"));\n\nconst Portfolio = (props) => (\n  <Suspense fallback={null}>\n    <LazyPortfolio {...props} />\n  </Suspense>\n);\n\nexport default Portfolio;\n","import React, { lazy, Suspense } from \"react\";\n\nconst LazyPeriodicTable = lazy(() => import(\"./PeriodicTable\"));\n\nconst PeriodicTable = (props) => (\n  <Suspense fallback={null}>\n    <LazyPeriodicTable {...props} />\n  </Suspense>\n);\n\nexport default PeriodicTable;\n","import React, {\n  useState,\n  useEffect,\n  useLayoutEffect,\n  cloneElement,\n} from \"react\";\n\nimport useNamespace from \"./modules/namespace/useNamespace\";\nimport useCache, { CacheProvider, useCacheSet } from \"./modules/cache/useCache\";\nimport PullToRefresh from \"rmc-pull-to-refresh\";\nimport useLocationSubscriber, {\n  LocationSubscriber,\n} from \"./modules/navigation/useLocation.Subscriber\";\nimport useLocation from \"./modules/navigation/useLocation\";\nimport Github from \"./views/Github/Github.lazy\";\nimport Covid from \"./views/Covid/Covid.lazy\";\nimport Home from \"./views/Home/Home.lazy\";\nimport Portfolio from \"./views/Portfolio/Portfolio.lazy\";\nimport PeriodicTable from \"./views/PeriodicTable/PeriodicTable.lazy\";\n\nconst Switch = ({ children }) => {\n  const [location] = useLocation();\n  const element = children.find((child) => {\n    return location && location.includes(child.props.path);\n  });\n  console.log(location, element);\n  if (!element) return null;\n  return element;\n};\nconst app = (\n  <>\n    <LocationSubscriber />\n    <Switch>\n      <Covid path=\"/covid\" />\n      <Github path=\"/github\" />\n      <PeriodicTable path=\"/periodic-table\" />\n      <Portfolio path=\"/portfolio\" />\n\n      {/* default */}\n      <Home path=\"/\" />\n    </Switch>\n  </>\n);\nexport default function App() {\n  return <CacheProvider>{app}</CacheProvider>;\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./styles.scss\";\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  rootElement\r\n);\r\n","import { useState, useEffect, useContext, useRef, useCallback } from \"react\";\r\nimport React from \"react\";\r\nconst CacheContext = React.createContext({});\r\nconst ListennerContext = React.createContext({});\r\nconst UpdateCachesContext = React.createContext(() => {\r\n  console.error(\"not set func!\");\r\n});\r\nexport const CacheProvider = ({ initialVale = {}, children }) => {\r\n  const uIdRef = useRef(0);\r\n  const listennersRef = useRef({});\r\n  const cachesRef = useRef(initialVale);\r\n  const [update, setUpdate] = useState(initialVale);\r\n  const handleListenner = useCallback(cb => {\r\n    uIdRef.current = uIdRef.current + 1;\r\n    listennersRef.current[uIdRef.current] = cb;\r\n    cb(cachesRef.current);\r\n    return () => delete listennersRef.current[uIdRef.current];\r\n  }, []);\r\n  const handleUpdate = useCallback((key, value) => {\r\n    cachesRef.current[key] = value;\r\n    setUpdate(Date.now());\r\n  }, []);\r\n  useEffect(() => {\r\n    Object.values(listennersRef.current).map(cb => cb(cachesRef.current));\r\n  }, [update]);\r\n  console.log({ update, caches: cachesRef.current });\r\n  return (\r\n    <CacheContext.Provider value={cachesRef.current}>\r\n      <ListennerContext.Provider value={handleListenner}>\r\n        <UpdateCachesContext.Provider value={handleUpdate}>\r\n          {children}\r\n        </UpdateCachesContext.Provider>\r\n      </ListennerContext.Provider>\r\n    </CacheContext.Provider>\r\n  );\r\n};\r\nexport const CacheConsumer = CacheContext.Consumer;\r\n// const caches = {};\r\nconst useCache = (key = \"\", initialValue) => {\r\n  const caches = useContext(CacheContext);\r\n  const [value, setValue] = useState(caches[key] || initialValue);\r\n  const listenner = useContext(ListennerContext);\r\n  const updateCaches = useContext(UpdateCachesContext);\r\n  useEffect(() => {\r\n    const cb = caches => setValue(caches[key]);\r\n    const unLisenner = listenner(cb);\r\n    return () => {\r\n      unLisenner();\r\n    };\r\n  }, [setValue, key, listenner]);\r\n  return [value|| initialValue, value => updateCaches(key, value)];\r\n};\r\nexport const useCacheSet = key => {\r\n  const handleUpdate = useContext(UpdateCachesContext);\r\n  return React.useCallback(value => handleUpdate(key, value), [\r\n    key,\r\n    handleUpdate\r\n  ]);\r\n};\r\nexport default useCache;\r\n","export default {\r\n    root:'navigation',\r\n    location:'navigation.location'\r\n}","import React, { useEffect } from 'react'\r\nimport useCache from '../cache/useCache'\r\nimport namespace from './namespace'\r\nconst useLocation = ()=>{\r\n    return useCache(namespace.location)\r\n}\r\nexport default useLocation","import React from \"react\";\r\nconst NamespaceContext = React.createContext(\"\");\r\nexport const NamespaceProvider = NamespaceContext.Provider;\r\nexport const NamespaceConsumer = NamespaceContext.Consumer;\r\nexport default NamespaceContext;\r\n","import { useContext } from \"react\";\r\nimport NamespaceContext from \"./NamespaceContext\";\r\n\r\nconst useNamespace = (namespace = \"\") => {\r\n  return useContext(NamespaceContext) + \"/\" + namespace;\r\n};\r\nexport default useNamespace;\r\n"],"sourceRoot":""}